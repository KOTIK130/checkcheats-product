<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–¥—É–∫—Ç—ã - CheckCheats</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }
        
        .purchase-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .modal-content {
            background: var(--background-card);
            margin: 10% auto;
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
        }
        
        .close-modal {
            color: var(--text-secondary);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close-modal:hover {
            color: var(--text-primary);
        }
        
        .price-options {
            margin: 1.5rem 0;
        }
        
        .price-option {
            background: var(--background-dark);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .price-option:hover {
            border-color: var(--primary-color);
        }
        
        .price-option.selected {
            border-color: var(--accent-color);
            background: rgba(0, 212, 255, 0.1);
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-brand">CheckCheats</a>
            <ul class="nav-menu">
                <li><a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="/products" class="nav-link active">–ü—Ä–æ–¥—É–∫—Ç—ã</a></li>
                <% if (user) { %>
                    <li><a href="/dashboard" class="nav-link">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
                    <% if (user.group === 'Admin') { %>
                        <li><a href="/admin" class="nav-link">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a></li>
                    <% } %>
                    <li><a href="#" onclick="logout()" class="nav-link">–í—ã–π—Ç–∏</a></li>
                <% } else { %>
                    <li><a href="/login" class="nav-link">–í–æ–π—Ç–∏</a></li>
                    <li><a href="/register" class="btn-primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
                <% } %>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="hero">
            <h1>–ù–∞—à–∏ –ü—Ä–æ–¥—É–∫—Ç—ã</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –≤–∞—à–µ–π –∏–≥—Ä—ã</p>
        </div>

        <div class="products-grid">
            <!-- Hardcoded product for demo, will be dynamic later -->
            <div class="product-card">
                <img src="https://via.placeholder.com/400x200/1e1e2e/0084ff?text=CheckCheats" alt="Product" class="product-image">
                <div class="product-content">
                    <h3 class="product-title">CheckCheats Scanner</h3>
                    <p class="product-description">
                        –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∏—Ç–æ–≤. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ!
                    </p>
                    
                    <div style="margin: 1.5rem 0;">
                        <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem;">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="color: var(--text-primary); margin-bottom: 0.5rem;">‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
                            <li style="color: var(--text-primary); margin-bottom: 0.5rem;">‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö —á–∏—Ç–æ–≤</li>
                            <li style="color: var(--text-primary); margin-bottom: 0.5rem;">‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã</li>
                            <li style="color: var(--text-primary); margin-bottom: 0.5rem;">‚úÖ –ê–Ω–∞–ª–∏–∑ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</li>
                            <li style="color: var(--text-primary); margin-bottom: 0.5rem;">‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö</li>
                            <li style="color: var(--text-primary); margin-bottom: 0.5rem;">‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —á–∏—Ç–æ–≤</li>
                        </ul>
                    </div>
                    
                    <div class="product-price">$1</div>
                    
                    <button class="btn-primary" style="width: 100%;" onclick="openPurchaseModal()">
                        üõí –ö—É–ø–∏—Ç—å
                    </button>
                </div>
            </div>
            
            <% if (typeof products !== 'undefined' && products.length > 0) { %>
                <% products.forEach(product => { %>
                <div class="product-card">
                    <img src="<%= product.image %>" alt="<%= product.name %>" class="product-image">
                    <div class="product-content">
                        <h3 class="product-title"><%= product.name %></h3>
                        <p class="product-description"><%= product.description %></p>
                        
                        <% if (product.features && product.features.length > 0) { %>
                        <div style="margin: 1.5rem 0;">
                            <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem;">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</h4>
                            <ul style="list-style: none; padding: 0;">
                                <% product.features.forEach(feature => { %>
                                <li style="color: var(--text-primary); margin-bottom: 0.5rem;">‚úÖ <%= feature %></li>
                                <% }) %>
                            </ul>
                        </div>
                        <% } %>
                        
                        <div class="product-price"><%= product.price %>‚ÇΩ</div>
                        
                        <button class="btn-primary" style="width: 100%;" onclick="openPurchaseModal()">
                            üõí –ö—É–ø–∏—Ç—å
                        </button>
                    </div>
                </div>
                <% }) %>
            <% } %>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div id="purchaseModal" class="purchase-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closePurchaseModal()">&times;</span>
            <h2 style="margin-bottom: 1.5rem;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω</h2>
            
            <div class="price-options">
                <div class="price-option" onclick="selectPriceOption(this, '30days', 1990)">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h3 style="color: var(--text-primary);">30 –¥–Ω–µ–π</h3>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">–ú–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞</p>
                        </div>
                        <div style="text-align: right;">
                            <div class="product-price">1,990‚ÇΩ</div>
                        </div>
                    </div>
                </div>
                
                <div class="price-option" onclick="selectPriceOption(this, '90days', 4990)">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h3 style="color: var(--text-primary);">90 –¥–Ω–µ–π</h3>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">3 –º–µ—Å—è—Ü–∞ (-17%)</p>
                        </div>
                        <div style="text-align: right;">
                            <div class="product-price">4,990‚ÇΩ</div>
                            <small style="color: var(--text-secondary); text-decoration: line-through;">5,970‚ÇΩ</small>
                        </div>
                    </div>
                </div>
                
                <div class="price-option" onclick="selectPriceOption(this, '180days', 8990)">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h3 style="color: var(--text-primary);">180 –¥–Ω–µ–π</h3>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">6 –º–µ—Å—è—Ü–µ–≤ (-25%)</p>
                        </div>
                        <div style="text-align: right;">
                            <div class="product-price">8,990‚ÇΩ</div>
                            <small style="color: var(--text-secondary); text-decoration: line-through;">11,940‚ÇΩ</small>
                        </div>
                    </div>
                </div>
                
                <div class="price-option" onclick="selectPriceOption(this, 'lifetime', 14990)">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h3 style="color: var(--text-primary);">–ù–∞–≤—Å–µ–≥–¥–∞</h3>
                            <p style="color: var(--success-color); font-size: 0.875rem;">‚≠ê –õ—É—á—à–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</p>
                        </div>
                        <div style="text-align: right;">
                            <div class="product-price">14,990‚ÇΩ</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="background: var(--background-dark); border-radius: 8px; padding: 1.5rem; margin-top: 1.5rem;">
                <h3 style="margin-bottom: 1rem; color: var(--primary-color);">–ö–∞–∫ –∫—É–ø–∏—Ç—å:</h3>
                <ol style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 1.8;">
                    <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∞—Ä–∏—Ñ</li>
                    <li>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –≤ Telegram: <a href="https://t.me/nursultan_support" style="color: var(--accent-color);">@nursultan_support</a></li>
                    <li>–û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ CryptoBot –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–±</li>
                    <li>–ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</li>
                    <li>–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ</li>
                </ol>
            </div>
            
            <div style="margin-top: 1.5rem; text-align: center;">
                <button id="purchaseButton" class="btn-primary" onclick="proceedPurchase()">
                    –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ
                </button>
            </div>
        </div>
    </div>

    <script>
        let selectedPlan = null;
        let selectedPrice = null;
        
        function openPurchaseModal() {
            document.getElementById('purchaseModal').style.display = 'block';
        }
        
        function closePurchaseModal() {
            document.getElementById('purchaseModal').style.display = 'none';
            // Reset selection
            document.querySelectorAll('.price-option').forEach(option => {
                option.classList.remove('selected');
            });
            selectedPlan = null;
            selectedPrice = null;
        }
        
        function selectPriceOption(element, plan, price) {
            // Remove previous selection
            document.querySelectorAll('.price-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selection to clicked option
            element.classList.add('selected');
            selectedPlan = plan;
            selectedPrice = price;
        }
        
        function proceedPurchase() {
            if (!selectedPlan) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω');
                return;
            }
            
            // Open Telegram with pre-filled message
            const message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ CheckCheats Scanner –∑–∞ $1`;
            const telegramUrl = `https://t.me/nursultan_support?text=${encodeURIComponent(message)}`;
            window.open(telegramUrl, '_blank');
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('purchaseModal');
            if (event.target == modal) {
                closePurchaseModal();
            }
        }
        
        function logout() {
            fetch('/api/auth/logout', { method: 'POST' })
                .then(res => res.json())
                .then(data => {
                    if (data.success) {
                        window.location.href = data.redirect;
                    }
                });
        }
    </script>
</body>
</html>